#!/usr/bin/env php
<?php
require __DIR__ . "/../vendor/autoload.php";

use nyansapow\Nyansapow;
use clearice\argparser\ArgumentParser;

$parser = new ArgumentParser();
$parser->addOption([
    'short' => 'i',
    'name' => 'input',
    'type' => 'string',
    'help' => "specifies where the input files for the site are found."
]);

$parser->addOption([
    'short' => 'o',
    'name' => 'output',
    'type' => 'string',
    "help" => "specifies where the site should be written to"
]);

$parser->addOption([
    'short' => 'n',
    'name' => 'site-name',
    'type' => 'string',
    'help' => 'set the name for the entire site'
]);

$description = <<<EOT
nyansapow site generator
James Ekow Abaka Ainooson <jainooson@gmail.com>
        
A simple static site generator engine to be used for generating static wikis, 
blogs and any kind of site you can think of.

EOT;
$parser->enableHelp($description);
$options = $parser->parse();

if(!isset($options['input'])) {
    echo $parser->getHelpMessage();
    exit();
}

try {
    $nyansapow = Nyansapow::open($options['input'], $options['output'], $options);
    $nyansapow->write();
} catch(\Exception $e) {
    print $e->getMessage() . "\n";
}
