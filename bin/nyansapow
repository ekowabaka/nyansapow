#!/usr/bin/env php
<?php
require __DIR__ . "/../vendor/autoload.php";

use nyansapow\Nyansapow;
use clearice\ClearIce;

error_reporting(E_ALL ^ E_NOTICE);

ClearIce::addOptions(
    array(
        'short' => 'i',
        'long' => 'input',
        'has_value' => true,
        'help' => "specifies where the input files for the site are found."
    ),
    array(
        'short' => 'o',
        'long' => 'output',
        'has_value' => true,
        "help" => "specifies where the site should be written to"
    ),
    array(
        'short' => 'n',
        'long' => 'site-name',
        'has_value' => true,
        'help' => 'set the name for the entire site'
    ),
    array(
        'short' => 'g',
        'long' => 'init-git-hooks',
        'help' => 'setup the nyansapow git hooks in a bare git repository'
    ),
    array(
        'short' => 'u',
        'long' => 'update-git-hooks',
        'help' => 'update the nyansapow git hooks in a bare git repository'
    ),
    array(
        'short' => 'r',
        'long'  => 'git-repo',
        'has_value' => true,
        'help'  => 'specify the location of the git repository'
    )
);

ClearIce::addHelp();
ClearIce::setStrict(true);

$description = <<<EOT
nyansapow site generator
James Ekow Abaka Ainooson <jainooson@gmail.com>
        
A simple static site generator engine to be used for generating static wikis, 
blogs and any kind of site you can think of.

EOT;

ClearIce::setDescription($description);
$options = ClearIce::parse();

try
{
    $nyansapow = Nyansapow::open($options['input'], $options['output'], $options);
    $nyansapow->write();
}
catch(\Exception $e)
{
    ClearIce::error($e->getMessage());
}

